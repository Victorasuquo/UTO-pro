# Python Code Documentation Generator with OpenAI API

## Overview

This script automates the process of generating detailed, structured documentation in Markdown format for Python source files. It scans a specified directory (by default, the current working directory) to locate all Python files, then uses the OpenAI API to generate documentation based on a prompt. The resulting Markdown documentation is saved alongside each source file. Multiprocessing is used to process multiple files concurrently, speeding up the documentation generation process.

## Installation & Dependencies

- **Python 3.6+**
- **Third-party libraries:**
  - [openai](https://pypi.org/project/openai/): For interacting with OpenAI's API.
- **Standard libraries:**
  - os
  - multiprocessing

**Installation Example:**

1. Install Python 3 if not already installed.
2. Install the OpenAI package:
   ```bash
   pip install openai
   ```

3. Ensure you have an active OpenAI API key. Replace the placeholder in the script with your actual key.

## Usage

1. **Update the API Key:**  
   Edit the script to include your OpenAI API key:
   ```python
   client = openai.OpenAI(api_key = "YOUR_OPENAI_API_KEY")
   ```

2. **Run the Script:**  
   Execute the script from the command line:
   ```bash
   python script.py
   ```
   This will:
   - Search the current directory (and subdirectories, excluding the `.venv` folder) for Python files.
   - Generate Markdown documentation for each file using the OpenAI API.
   - Save the generated documentation in the same directory as each source file with a `.md` extension.

## Function/Class Documentation

### get_python_files(folder_path)

- **Purpose:**  
  Walks through the directory tree starting from `folder_path` and collects paths of Python files (`.py`), excluding any files in a `.venv` directory.
  
- **Parameters:**
  - `folder_path` (str): The path of the folder to search for Python files.
  
- **Returns:**  
  - `list[str]`: A list of full file paths of Python files found.

### read_file(file_path)

- **Purpose:**  
  Opens a given file in read mode and returns its content as a string.
  
- **Parameters:**
  - `file_path` (str): The full path to the file.
  
- **Returns:**  
  - `str`: The content of the file.

### generate_markdown_output(content)

- **Purpose:**  
  Sends a request to the OpenAI API with a formatted prompt instructing the API to generate detailed Markdown documentation for the provided code content.
  
- **Parameters:**
  - `content` (str): The Python source code content to be documented.
  
- **Returns:**  
  - `str`: The Markdown formatted documentation generated by the API.

### save_markdown_file(folder_path, file_name, content)

- **Purpose:**  
  Saves the generated Markdown documentation to a file. The file is named after the original Python file (without the `.py` extension) and saved with a `.md` extension.
  
- **Parameters:**
  - `folder_path` (str): The directory where the Markdown file will be saved.
  - `file_name` (str): The base name (without extension) for the Markdown file.
  - `content` (str): The Markdown documentation content to be written.
  
- **Returns:**  
  - None, but prints a confirmation message indicating where the file was saved.

### process_file(file_path)

- **Purpose:**  
  Processes a single Python file by reading its content, generating its Markdown documentation, and saving the output.
  
- **Parameters:**
  - `file_path` (str): The full path to the Python file to process.
  
- **Returns:**  
  - None. It performs the complete workflow for a single file.

### generate_documentation()

- **Purpose:**  
  Serves as the main driver of the script. It:
  - Determines the current working directory.
  - Finds all Python files in that directory.
  - Uses multiprocessing to generate documentation for each file concurrently.
  
- **Parameters:**  
  - None
  
- **Returns:**  
  - None but outputs the generated documentation files and prints status messages.

## Code Walkthrough

1. **Imports and API Initialization:**
   - The script starts by importing necessary modules (`os`, `openai`, and `Pool` from `multiprocessing`).
   - An OpenAI API client is created using the provided API key.

2. **File Discovery:**
   - The function `get_python_files(folder_path)` recursively traverses directories and collects Python files. Notice that it deliberately skips the `.venv` folder to avoid processing virtual environments.

3. **File Content Handling:**
   - `read_file(file_path)` opens and reads the content of a file.
   - The file content is then passed to the `generate_markdown_output(content)` function.

4. **Documentation Generation:**
   - In `generate_markdown_output(content)`, the script constructs a prompt and sends it to the OpenAI API. The response (Markdown documentation) is extracted from the API result.
   - This Markdown content is saved using the `save_markdown_file(folder_path, file_name, content)` function.

5. **Processing Each File:**
   - `process_file(file_path)` encapsulates the workflow for a single file: reading its content, generating documentation, and saving the result.
   
6. **Multiprocessing:**
   - The `generate_documentation()` function determines the current working directory, collects all Python files, and uses a multiprocessing pool to concurrently process files via the `process_file` function.

7. **Execution:**
   - The script executes `generate_documentation()` when run as the main module, initiating the whole process.

## Example Output

- For each Python file processed (e.g., `example.py`), a corresponding Markdown file (e.g., `example.md`) will be generated and saved in the same directory.
- The console output will include messages such as:
  ```
  Markdown file saved as: /path/to/directory/example.md
  Documentation generated successfully for all Python files.
  ```

## Error Handling

- **Directory Scanning:**  
  If no Python files are found in the target directory, the script prints an informative message:
  ```
  No Python files found in the folder: [folder_path]
  ```

- **File Operations:**  
  Basic error handling is assumed during file reading and writing operations. For production-grade applications, consider adding try-except blocks to catch and handle potential exceptions (e.g., file not found, permission errors).

- **API Requests:**  
  The script directly calls the OpenAI API. In a robust implementation, you might want to implement retries and error checking for the API response.

---

This comprehensive documentation should help you understand, deploy, and extend the Python documentation generator script with ease.